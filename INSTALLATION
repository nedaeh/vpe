Preliminaries
=============

These instructions assume that you have cloned the VPE into a folder named vpe, and checked
out the "realtime" branch. This can be accomplished as follows:

$ git clone https://github.com/qusp/orange3 vpe
$ git checkout realtime

Note that, when you switch between git-related commands and Python-related commands (e.g., pip),
you will likely have to switch between the git bash on Windows and a regular command line (cmd.exe).

On Linux
========

* install the following packages through your package manager (following guide
  written for apt-get, tested on Ubuntu 14.10):
  - build-essential
  - libblas-dev
  - liblapack-dev
  - libgmp-dev
  - gfortran
  - python3
  - python3-dev
  - python3-pyqt4
  - python3-pip
  - virtualenv

* create a virtual environment:
  $ pip3 install virtualenv
  $ cd /path/to/vpe
  $ virtualenv venv --python=python3 --system-site-packages

* activate virtual environment:
  $ source venv/bin/activate

* install requirements
  $ pip install numpy
  $ pip install -r vpe/requirements.txt

* clone CPE & install its dependencies into vpe venv:
  $ cd ..
  $ git clone https://github.com/qusp/cpe
  $ git checkout your-branch (could be develop, master, or a tag/release)
  $ pip install -r cpe/requirements.txt

* auto-generate widgets for CPE nodes:
  $ python scripts/regenerate_widgets.py --neuropype-path cpe/neuropype
  (you can re-invoke this command whenever you have edited your CPE code)

* initialize VPE package
  $ cd vpe
  $ python setup.py develop

* you can now launch the VPE using the command:
  > python -m Orange.canvas

* for a good development experience, we recommend
  that you install and set up PyCharm:
  * open the vpe folder from PyCharm
  * under Settings / Project: vpe / Project Interpreter / Project Interpreter
    make sure that it picked up the folder path\to\cpe\venv; if it didn't (e.g.,
    older PyCharm version), do the following:
      - under Settings / Project: vpe / Project Interpreter / Project Interpreter
        click the gear icon
      - click Add local..., and select the python executable in your cpe/venv/Lib
        folder.
      - accept and close the settings dialog. PyCharm will scan your virtualenv
        once, which will take a few minutes (see bottom progress bar)
  * in the project pane on the left you can now navigate to the file
    Orange / canvas / __main__.py, and then right-click and select
    "Run '__main__'" to run the VPE (or Debug '__main__' to run it in debug mode)

* to launch from the command line, make sure that you have your venv activated
  like you did during the installation

On Windows
==========

* Make sure that you have Python 3.4 installed
  (we assume here you have it in C:\Python34)

* create a virtual environment:
  > C:\Python34\Scripts\pip3 install virtualenv
  > cd path\to\vpe
  > C:\Python34\Scripts\virtualenv venv

* activate virtual environment:
  > venv\Scripts\activate

* install binary dependencies
  > pip install https://github.com/qusp/dependencies/blob/master/python/numpy/numpy-1.9.2+mkl-cp34-none-win32.whl?raw=true
  > pip install https://github.com/qusp/dependencies/blob/master/python/scipy/scipy-0.15.1-cp34-none-win32.whl?raw=true
  > pip install https://github.com/qusp/dependencies/blob/master/python/gmpy/gmpy-1.17-cp34-none-win32.whl?raw=true
  > pip install https://github.com/qusp/dependencies/blob/master/python/pyqt/PyQt4-4.11.3-cp34-none-win32.whl?raw=true

* install requirements
  > pip install -r requirements.txt

* clone CPE & install its dependencies into vpe/venv:
  > cd ..
  > git clone https://github.com/qusp/cpe
  > git checkout your-branch (could be develop, master, or a tag/release)
  > pip install -r cpe/requirements.txt

* auto-generate widgets for CPE nodes:
  > python vpe\scripts\regenerate_widgets.py --neuropype-path cpe\neuropype
  (you can re-invoke this command whenever you have edited your CPE code)

* initialize vpe package
  > cd vpe
  > python setup.py develop

* you can now launch the VPE using the command:
  > python -m Orange.canvas

* for a good development experience, we recommend
  that you install and set up PyCharm:
  * open the vpe folder from PyCharm
  * under Settings / Project: vpe / Project Interpreter / Project Interpreter
    make sure that it picked up the folder path\to\cpe\venv; if it didn't (e.g.,
    older PyCharm version), do the following:
      - under Settings / Project: vpe / Project Interpreter / Project Interpreter
        click the gear icon
      - click Add local..., and select the python executable in your cpe/venv/Lib
        folder.
      - accept and close the settings dialog. PyCharm will scan your virtualenv
        once, which will take a few minutes (see bottom progress bar)
  * in the project pane on the left you can now navigate to the file
    Orange / canvas / __main__.py, and then right-click and select
    "Run '__main__'" to run the VPE (or Debug '__main__' to run it in debug mode)

* to launch from the command line, make sure that you have your venv activated
  like you did during the installation
